# OSI 七层模型

## 什么是 OSI 七层模型

> OSI （Open System Interconnect），即开放式系统互联。 一般都叫 OSI 参考模型，是 ISO（国际标准化组织）组织在 1985 年研究的网络互联模型。该体系结构标准定义了网络互连的七层框架（物理层、数据链路层、网络层、传输层、会话层、表示层和应用层），即 ISO 开放系统互连参考模型。在这一框架下进一步详细规定了每一层的功能，以实现开放系统环境中的互连性、互操作性和应用的可移植性。

发送方：应用层 => 表示层 => 会话层 => 传输层 => 网络层 => 数据链路层 => 物理层

而接收方正好相反。

### 应用层

>为应用程序提供服务并规定应用程序中通讯相关的细节，也就是为应用提供服务。常见的协议有 HTTP，FTP，TELNET、SMTP 等。

- 功能

针对特定应用的协议

- 概括

电子邮件 => 电子邮件协议
远程传输 => 远程登录协议
文件传输 => 文件传输协议

- 类比

快递公司收件员。当客户（应用）打电话（发起请求）给收件员（应用层）时，收件员可以根据用户的不同需求提供不同的服务（不同协议），比如隔天送达、指定时间送达等等。

### 表示层

> 将应用处理的信息转换为适合网络传输的格式，或者将来自下一层的数据转换为上层能处理的格式。它主要负责数据格式的转换。具体来说，就是将设备固有的数据格式转换为网络标准格式。常见的协议有 ASCII、SSL/TLS 等。

- 功能

设置固有格式和网络标准数据格式的转换

- 概括

格式转换，数据的压缩、加密、打包。

- 类比

快递公司收件员。如果快递（数据）太臃肿，他会在不破坏快递的情况下压扁（压缩）它。如果客户注重安全，全能的快递公司还能用密码箱（ SSL/TLS）打包快递再快送。当然，打包员会确定，目的地快递站的拆包员，能无损地拆开包裹，将快递交给用户。

### 会话层

> 会话层作用是负责建立和断开通信连接（数据流动的逻辑通路），以及数据的分割等数据传输相关的管理。常见的协议有 ADSP、RPC 等。

- 功能

建立、管理和维护通信，管理传输层下一层的分层（？）

- 概括

何时建立连接，何时断开连接以及保持多久连接

- 类比

快递公司调度员。管理着这次快递的相关的信息。例如这次客户要发 100 吨沙土（数据），发到哪，到底是一车一车发、还是用轮船一次运过去。这些都是他的职责。而运完之后，相关信息（连接）也可以被销毁了，这也是调度员的职责。

### 传输层

> 传输层起着可靠传输的作用。只在通信双方节点进行处理，而不需在路由器上处理。此层有两个具有代表性的协议： `TCP` 与 `UDP`。

- 功能

管理两个节点之间的数据传输（确保数据被可靠的传输到目标地址）

- 补充

`TCP` 协议提供可靠的通信传输，简单说就是确认目标能通信的情况下才会传输数据（因此需要三次握手），传输过程如果丢了数据，也会重发。而 `UDP` 协议则不然，不会确认目标能否通信，只会根据协议发到对方地址的端口。至于对方收不收到，丢不丢包，一概不管。

传输层有一个重要作用，就是指定通信端口。以请求服务器数据为例，服务器有处理多种协议的能力，如之前应用层所说的 `HTTP`，`FTP`，`TELNET` 等，但到底你是用什么协议呢？服务器并不知道。但如果你指定了端口，如 80，服务器就会知道你是想用 HTTP 协议的，自然会转给对应协议的处理程序进行处理。

- 类比

快递公司跟单员。负责任的跟单员（使用 `TCP` 协议）会保证快递送到客户手上，如果送不到就让公司再发一次。不负责任的跟单员（使用 `UDP` 协议）层只管将快递送到客户指定的地方，不管快递是否送到客户手上。

### 网络层

> 网络层负责将数据传输到目标地址。目标地址可以使多个网络通过路由器连接而成的某一个地址。因此这一层主要负责寻址和路由选择。主要由 `IP`、`ICMP` 两个协议组成。

- 功能

地址管理和路由选择

- 概括

经由哪个路由传给目标地址

- 类比

快递公司的路线规划者。快递公司有很多集散中心，根据集散中心的情况（是否拥堵），找出一条经过 n 个集散中心的路径将货物（数据）沿路运过去。

### 数据链路层

> 该层负责物理层面上互连的节点之间的通信传输。例如与 1 个以太网相连的两个节点间的通讯。常见的协议有 `HDLC`、`PPP`、`SLIP` 等。

- 功能

互联设备之间传送和识别数据帧

- 概括

数据帧与比特流之间的转换

- 类比

快递公司的司机。他们驾驶着汽车，将打包好的货物（数据帧）从一个城市（物理节点）运输到另一个城市。

### 物理层

> 物理层负责 0、1 比特流（0、1 序列）与电压高低、光的闪灭之间的互换。典型的协议有 RS 232C、RS 449/422/423、V.24 和 X.21、X.21bis 等。

- 功能

将数据的 0、1 转化为电压和脉冲光传输给物理的传输介质

- 概括

使用物理介质进行传输

- 类比

公路、汽车和飞机等承载货物（数据）的交通工具
